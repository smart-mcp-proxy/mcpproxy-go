{"swagger":"2.0","info":{"description":"MCPProxy REST API for managing MCP servers, tools, and diagnostics\n\nMCPProxy is a smart proxy for AI agents using the Model Context Protocol (MCP).\nIt provides intelligent tool discovery, massive token savings, and built-in security quarantine.","title":"MCPProxy API","contact":{"name":"MCPProxy Support","url":"https://github.com/smart-mcp-proxy/mcpproxy-go"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"1.0"},"paths":{"/api/v1/activity":{"get":{"security":[{"ApiKeyHeader":[]},{"ApiKeyQuery":[]}],"description":"Returns paginated list of activity records with optional filtering","consumes":["application/json"],"produces":["application/json"],"tags":["Activity"],"summary":"List activity records","parameters":[{"enum":["tool_call","policy_decision","quarantine_change","server_change"],"type":"string","description":"Filter by activity type","name":"type","in":"query"},{"type":"string","description":"Filter by server name","name":"server","in":"query"},{"type":"string","description":"Filter by tool name","name":"tool","in":"query"},{"type":"string","description":"Filter by MCP session ID","name":"session_id","in":"query"},{"enum":["success","error","blocked"],"type":"string","description":"Filter by status","name":"status","in":"query"},{"enum":["read","write","destructive"],"type":"string","description":"Filter by intent operation type (Spec 018)","name":"intent_type","in":"query"},{"type":"string","description":"Filter by HTTP request ID for log correlation (Spec 021)","name":"request_id","in":"query"},{"type":"string","description":"Filter activities after this time (RFC3339)","name":"start_time","in":"query"},{"type":"string","description":"Filter activities before this time (RFC3339)","name":"end_time","in":"query"},{"type":"integer","description":"Maximum records to return (1-100, default 50)","name":"limit","in":"query"},{"type":"integer","description":"Pagination offset (default 0)","name":"offset","in":"query"}],"responses":{"200":{"description":"OK","schema":{"allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"},{"type":"object","properties":{"data":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ActivityListResponse"}}}]}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}}}}},"/api/v1/activity/export":{"get":{"security":[{"ApiKeyHeader":[]},{"ApiKeyQuery":[]}],"description":"Exports activity records in JSON Lines or CSV format for compliance","consumes":["application/json"],"produces":["application/x-ndjson","text/csv"],"tags":["Activity"],"summary":"Export activity records","parameters":[{"type":"string","description":"Export format: json (default) or csv","name":"format","in":"query"},{"type":"string","description":"Filter by activity type","name":"type","in":"query"},{"type":"string","description":"Filter by server name","name":"server","in":"query"},{"type":"string","description":"Filter by tool name","name":"tool","in":"query"},{"type":"string","description":"Filter by MCP session ID","name":"session_id","in":"query"},{"type":"string","description":"Filter by status","name":"status","in":"query"},{"type":"string","description":"Filter activities after this time (RFC3339)","name":"start_time","in":"query"},{"type":"string","description":"Filter activities before this time (RFC3339)","name":"end_time","in":"query"}],"responses":{"200":{"description":"Streamed activity records","schema":{"type":"string"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}}}}},"/api/v1/activity/summary":{"get":{"security":[{"ApiKeyHeader":[]},{"ApiKeyQuery":[]}],"description":"Returns aggregated activity statistics for a time period","consumes":["application/json"],"produces":["application/json"],"tags":["Activity"],"summary":"Get activity summary statistics","parameters":[{"type":"string","description":"Time period: 1h, 24h (default), 7d, 30d","name":"period","in":"query"},{"type":"string","description":"Group by: server, tool (optional)","name":"group_by","in":"query"}],"responses":{"200":{"description":"OK","schema":{"allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"},{"type":"object","properties":{"data":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ActivitySummaryResponse"}}}]}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}}}}},"/api/v1/activity/{id}":{"get":{"security":[{"ApiKeyHeader":[]},{"ApiKeyQuery":[]}],"description":"Returns full details for a single activity record","consumes":["application/json"],"produces":["application/json"],"tags":["Activity"],"summary":"Get activity record details","parameters":[{"type":"string","description":"Activity record ID (ULID)","name":"id","in":"path","required":true}],"responses":{"200":{"description":"OK","schema":{"allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"},{"type":"object","properties":{"data":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ActivityDetailResponse"}}}]}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"}}}}},"/api/v1/config":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieves the current MCPProxy configuration including all server definitions, global settings, and runtime parameters","produces":["application/json"],"tags":["config"],"summary":"Get current configuration","responses":{"200":{"description":"Configuration retrieved successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.GetConfigResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Failed to get configuration","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/config/apply":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Applies a new MCPProxy configuration. Validates and persists the configuration to disk. Some changes apply immediately, while others may require a restart. Returns detailed information about applied changes and restart requirements.","consumes":["application/json"],"produces":["application/json"],"tags":["config"],"summary":"Apply configuration","parameters":[{"description":"Configuration to apply","name":"config","in":"body","required":true,"schema":{"$ref":"#/definitions/mcpproxy-go_internal_config.Config"}}],"responses":{"200":{"description":"Configuration applied successfully with change details","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ConfigApplyResult"}},"400":{"description":"Invalid JSON payload","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Failed to apply configuration","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/config/validate":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Validates a provided MCPProxy configuration without applying it. Checks for syntax errors, invalid server definitions, conflicting settings, and other configuration issues.","consumes":["application/json"],"produces":["application/json"],"tags":["config"],"summary":"Validate configuration","parameters":[{"description":"Configuration to validate","name":"config","in":"body","required":true,"schema":{"$ref":"#/definitions/mcpproxy-go_internal_config.Config"}}],"responses":{"200":{"description":"Configuration validation result","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ValidateConfigResponse"}},"400":{"description":"Invalid JSON payload","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Validation failed","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/diagnostics":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Get comprehensive health diagnostics including upstream errors, OAuth requirements, missing secrets, and Docker status","produces":["application/json"],"tags":["diagnostics"],"summary":"Get health diagnostics","responses":{"200":{"description":"Health diagnostics","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.Diagnostics"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/docker/status":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieve current Docker availability and recovery status","produces":["application/json"],"tags":["docker"],"summary":"Get Docker status","responses":{"200":{"description":"Docker status information","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.SuccessResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/doctor":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Get comprehensive health diagnostics including upstream errors, OAuth requirements, missing secrets, and Docker status","produces":["application/json"],"tags":["diagnostics"],"summary":"Get health diagnostics","responses":{"200":{"description":"Health diagnostics","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.Diagnostics"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/index/search":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Search across all upstream MCP server tools using BM25 keyword search","produces":["application/json"],"tags":["tools"],"summary":"Search for tools","parameters":[{"type":"string","description":"Search query","name":"q","in":"query","required":true},{"maximum":100,"type":"integer","default":10,"description":"Maximum number of results","name":"limit","in":"query"}],"responses":{"200":{"description":"Search results","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.SearchToolsResponse"}},"400":{"description":"Bad request (missing query parameter)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/info":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Get essential server metadata including version, web UI URL, endpoint addresses, and update availability\nThis endpoint is designed for tray-core communication and version checking\nUse refresh=true query parameter to force an immediate update check against GitHub","produces":["application/json"],"tags":["status"],"summary":"Get server information","parameters":[{"type":"boolean","description":"Force immediate update check against GitHub","name":"refresh","in":"query"}],"responses":{"200":{"description":"Server information with optional update info","schema":{"allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.APIResponse"},{"type":"object","properties":{"data":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.InfoResponse"}}}]}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/registries":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieves list of all MCP server registries that can be browsed for discovering and installing new upstream servers. Includes registry metadata, server counts, and API endpoints.","produces":["application/json"],"tags":["registries"],"summary":"List available MCP server registries","responses":{"200":{"description":"Registries retrieved successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.GetRegistriesResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Failed to list registries","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/registries/{id}/servers":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Searches for MCP servers within a specific registry by keyword or tag. Returns server metadata including installation commands, source code URLs, and npm package information for easy discovery and installation.","produces":["application/json"],"tags":["registries"],"summary":"Search MCP servers in a registry","parameters":[{"type":"string","description":"Registry ID","name":"id","in":"path","required":true},{"type":"string","description":"Search query keyword","name":"q","in":"query"},{"type":"string","description":"Filter by tag","name":"tag","in":"query"},{"type":"integer","description":"Maximum number of results (default 10)","name":"limit","in":"query"}],"responses":{"200":{"description":"Servers retrieved successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.SearchRegistryServersResponse"}},"400":{"description":"Registry ID required","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Failed to search servers","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/secrets":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Stores a secret value in the operating system's secure keyring. The secret can then be referenced in configuration using ${keyring:secret-name} syntax. Automatically notifies runtime to restart affected servers.","consumes":["application/json"],"produces":["application/json"],"tags":["secrets"],"summary":"Store a secret in OS keyring","responses":{"200":{"description":"Secret stored successfully with reference syntax","schema":{"type":"object","additionalProperties":true}},"400":{"description":"Invalid JSON payload, missing name/value, or unsupported type","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"405":{"description":"Method not allowed","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Secret resolver not available or failed to store secret","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/secrets/{name}":{"delete":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Deletes a secret from the operating system's secure keyring. Automatically notifies runtime to restart affected servers. Only keyring type is supported for security.","produces":["application/json"],"tags":["secrets"],"summary":"Delete a secret from OS keyring","parameters":[{"type":"string","description":"Name of the secret to delete","name":"name","in":"path","required":true},{"type":"string","description":"Secret type (only 'keyring' supported, defaults to 'keyring')","name":"type","in":"query"}],"responses":{"200":{"description":"Secret deleted successfully","schema":{"type":"object","additionalProperties":true}},"400":{"description":"Missing secret name or unsupported type","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"405":{"description":"Method not allowed","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Secret resolver not available or failed to delete secret","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Get a list of all configured upstream MCP servers with their connection status and statistics","produces":["application/json"],"tags":["servers"],"summary":"List all upstream MCP servers","responses":{"200":{"description":"Server list with statistics","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.GetServersResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}},"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Add a new MCP upstream server to the configuration. New servers are quarantined by default for security.","consumes":["application/json"],"produces":["application/json"],"tags":["servers"],"summary":"Add a new upstream server","parameters":[{"description":"Server configuration","name":"server","in":"body","required":true,"schema":{"$ref":"#/definitions/internal_httpapi.AddServerRequest"}}],"responses":{"200":{"description":"Server added successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerActionResponse"}},"400":{"description":"Bad request - invalid configuration","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"409":{"description":"Conflict - server with this name already exists","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/disable_all":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Disable all configured upstream MCP servers with partial failure handling","produces":["application/json"],"tags":["servers"],"summary":"Disable all servers","responses":{"200":{"description":"Bulk disable results with success/failure counts","schema":{"$ref":"#/definitions/mcpproxy-go_internal_management.BulkOperationResult"}},"403":{"description":"Forbidden (management disabled)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/enable_all":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Enable all configured upstream MCP servers with partial failure handling","produces":["application/json"],"tags":["servers"],"summary":"Enable all servers","responses":{"200":{"description":"Bulk enable results with success/failure counts","schema":{"$ref":"#/definitions/mcpproxy-go_internal_management.BulkOperationResult"}},"403":{"description":"Forbidden (management disabled)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/reconnect":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Force reconnection to all upstream MCP servers","produces":["application/json"],"tags":["servers"],"summary":"Reconnect all servers","parameters":[{"type":"string","description":"Reason for reconnection","name":"reason","in":"query"}],"responses":{"200":{"description":"All servers reconnected successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerActionResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/restart_all":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Restart all configured upstream MCP servers sequentially with partial failure handling","produces":["application/json"],"tags":["servers"],"summary":"Restart all servers","responses":{"200":{"description":"Bulk restart results with success/failure counts","schema":{"$ref":"#/definitions/mcpproxy-go_internal_management.BulkOperationResult"}},"403":{"description":"Forbidden (management disabled)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}":{"delete":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Remove an MCP upstream server from the configuration. This stops the server if running and removes it from config.","produces":["application/json"],"tags":["servers"],"summary":"Remove an upstream server","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Server removed successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerActionResponse"}},"400":{"description":"Bad request","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/disable":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Disable a specific upstream MCP server","produces":["application/json"],"tags":["servers"],"summary":"Disable an upstream server","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Server disabled successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerActionResponse"}},"400":{"description":"Bad request","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/discover-tools":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Manually trigger tool discovery and indexing for a specific upstream MCP server. This forces an immediate refresh of the server's tool cache.","produces":["application/json"],"tags":["servers"],"summary":"Discover tools for a specific server","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Tool discovery triggered successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerActionResponse"}},"400":{"description":"Bad request (missing server ID)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Failed to discover tools","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/enable":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Enable a specific upstream MCP server","produces":["application/json"],"tags":["servers"],"summary":"Enable an upstream server","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Server enabled successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerActionResponse"}},"400":{"description":"Bad request","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/login":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Initiate OAuth authentication flow for a specific upstream MCP server. Returns structured OAuth start response with correlation ID for tracking.","produces":["application/json"],"tags":["servers"],"summary":"Trigger OAuth login for server","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true}],"responses":{"200":{"description":"OAuth login initiated successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.OAuthStartResponse"}},"400":{"description":"OAuth error (client_id required, DCR failed, etc.)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.OAuthFlowError"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/logout":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Clear OAuth authentication token and disconnect a specific upstream MCP server. The server will need to re-authenticate before tools can be used again.","produces":["application/json"],"tags":["servers"],"summary":"Clear OAuth token and disconnect server","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true}],"responses":{"200":{"description":"OAuth logout completed successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerActionResponse"}},"400":{"description":"Bad request (missing server ID)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"403":{"description":"Forbidden (management disabled or read-only mode)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/logs":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieve log entries for a specific upstream MCP server","produces":["application/json"],"tags":["servers"],"summary":"Get server logs","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true},{"type":"integer","default":100,"description":"Number of log lines to retrieve","name":"tail","in":"query"}],"responses":{"200":{"description":"Server logs retrieved successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.GetServerLogsResponse"}},"400":{"description":"Bad request (missing server ID)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/quarantine":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Place a specific upstream MCP server in quarantine to prevent tool execution","produces":["application/json"],"tags":["servers"],"summary":"Quarantine a server","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Server quarantined successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerActionResponse"}},"400":{"description":"Bad request (missing server ID)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/restart":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Restart the connection to a specific upstream MCP server","produces":["application/json"],"tags":["servers"],"summary":"Restart an upstream server","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Server restarted successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerActionResponse"}},"400":{"description":"Bad request","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/tool-calls":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieves tool call history filtered by upstream server ID. Returns recent tool executions for the specified server including timestamps, arguments, results, and errors. Useful for server-specific debugging and monitoring.","produces":["application/json"],"tags":["tool-calls"],"summary":"Get tool call history for specific server","parameters":[{"type":"string","description":"Upstream server ID or name","name":"id","in":"path","required":true},{"type":"integer","description":"Maximum number of records to return (1-100, default 50)","name":"limit","in":"query"}],"responses":{"200":{"description":"Server tool calls retrieved successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.GetServerToolCallsResponse"}},"400":{"description":"Server ID required","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"405":{"description":"Method not allowed","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Failed to get server tool calls","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/tools":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieve all available tools for a specific upstream MCP server","produces":["application/json"],"tags":["servers"],"summary":"Get tools for a server","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Server tools retrieved successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.GetServerToolsResponse"}},"400":{"description":"Bad request (missing server ID)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/servers/{id}/unquarantine":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Remove a specific upstream MCP server from quarantine to allow tool execution","produces":["application/json"],"tags":["servers"],"summary":"Unquarantine a server","parameters":[{"type":"string","description":"Server ID or name","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Server unquarantined successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerActionResponse"}},"400":{"description":"Bad request (missing server ID)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/sessions":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieves paginated list of active and recent MCP client sessions. Each session represents a connection from an MCP client to MCPProxy, tracking initialization time, tool calls, and connection status.","produces":["application/json"],"tags":["sessions"],"summary":"Get active MCP sessions","parameters":[{"type":"integer","description":"Maximum number of sessions to return (1-100, default 10)","name":"limit","in":"query"},{"type":"integer","description":"Number of sessions to skip for pagination (default 0)","name":"offset","in":"query"}],"responses":{"200":{"description":"Sessions retrieved successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.GetSessionsResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"405":{"description":"Method not allowed","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Failed to get sessions","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/sessions/{id}":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieves detailed information about a specific MCP client session including initialization parameters, connection status, tool call count, and activity timestamps.","produces":["application/json"],"tags":["sessions"],"summary":"Get MCP session details by ID","parameters":[{"type":"string","description":"Session ID","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Session details retrieved successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.GetSessionDetailResponse"}},"400":{"description":"Session ID required","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Session not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"405":{"description":"Method not allowed","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/stats/tokens":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieve token savings statistics across all servers and sessions","produces":["application/json"],"tags":["stats"],"summary":"Get token savings statistics","responses":{"200":{"description":"Token statistics","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.SuccessResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/status":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Get comprehensive server status including running state, listen address, upstream statistics, and timestamp","produces":["application/json"],"tags":["status"],"summary":"Get server status","responses":{"200":{"description":"Server status information","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.SuccessResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/tool-calls":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieves paginated tool call history across all upstream servers or filtered by session ID. Includes execution timestamps, arguments, results, and error information for debugging and auditing.","produces":["application/json"],"tags":["tool-calls"],"summary":"Get tool call history","parameters":[{"type":"integer","description":"Maximum number of records to return (1-100, default 50)","name":"limit","in":"query"},{"type":"integer","description":"Number of records to skip for pagination (default 0)","name":"offset","in":"query"},{"type":"string","description":"Filter tool calls by MCP session ID","name":"session_id","in":"query"}],"responses":{"200":{"description":"Tool calls retrieved successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.GetToolCallsResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"405":{"description":"Method not allowed","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Failed to get tool calls","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/tool-calls/{id}":{"get":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Retrieves detailed information about a specific tool call execution including full request arguments, response data, execution time, and any errors encountered.","produces":["application/json"],"tags":["tool-calls"],"summary":"Get tool call details by ID","parameters":[{"type":"string","description":"Tool call ID","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Tool call details retrieved successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.GetToolCallDetailResponse"}},"400":{"description":"Tool call ID required","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"404":{"description":"Tool call not found","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"405":{"description":"Method not allowed","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/tool-calls/{id}/replay":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Re-executes a previous tool call with optional modified arguments. Useful for debugging and testing tool behavior with different inputs. Creates a new tool call record linked to the original.","consumes":["application/json"],"produces":["application/json"],"tags":["tool-calls"],"summary":"Replay a tool call","parameters":[{"type":"string","description":"Original tool call ID to replay","name":"id","in":"path","required":true},{"description":"Optional modified arguments for replay","name":"request","in":"body","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ReplayToolCallRequest"}}],"responses":{"200":{"description":"Tool call replayed successfully","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ReplayToolCallResponse"}},"400":{"description":"Tool call ID required or invalid JSON payload","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"405":{"description":"Method not allowed","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Failed to replay tool call","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/api/v1/tools/call":{"post":{"security":[{"ApiKeyAuth":[]},{"ApiKeyQuery":[]}],"description":"Execute a tool on an upstream MCP server (wrapper around MCP tool calls)","consumes":["application/json"],"produces":["application/json"],"tags":["tools"],"summary":"Call a tool","parameters":[{"description":"Tool call request with tool name and arguments","name":"request","in":"body","required":true,"schema":{"type":"object","properties":{"arguments":{"type":"object"},"tool_name":{"type":"string"}}}}],"responses":{"200":{"description":"Tool call result","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.SuccessResponse"}},"400":{"description":"Bad request (invalid payload or missing tool name)","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}},"500":{"description":"Internal server error or tool execution failure","schema":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ErrorResponse"}}}}},"/doctor":{"get":{"security":[{"ApiKeyAuth":[],"ApiKeyQuery":[]}],"description":"Aggregates health information from all servers, checks OAuth status, missing secrets, and Docker availability","consumes":["application/json"],"produces":["application/json"],"tags":["diagnostics"],"summary":"Run health diagnostics","parameters":[{"type":"string","description":"API Key","name":"apikey","in":"query"}],"responses":{"200":{"description":"Comprehensive health diagnostics","schema":{"$ref":"#/definitions/main.Diagnostics"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/main.ErrorResponse"}}}}},"/healthz":{"get":{"description":"Get comprehensive health status including all component health (Kubernetes-compatible liveness probe)","produces":["application/json"],"tags":["health"],"summary":"Get health status","responses":{"200":{"description":"Service is healthy","schema":{"$ref":"#/definitions/mcpproxy-go_internal_observability.HealthResponse"}},"503":{"description":"Service is unhealthy","schema":{"$ref":"#/definitions/mcpproxy-go_internal_observability.HealthResponse"}}}}},"/readyz":{"get":{"description":"Get readiness status including all component readiness checks (Kubernetes-compatible readiness probe)","produces":["application/json"],"tags":["health"],"summary":"Get readiness status","responses":{"200":{"description":"Service is ready","schema":{"$ref":"#/definitions/mcpproxy-go_internal_observability.ReadinessResponse"}},"503":{"description":"Service is not ready","schema":{"$ref":"#/definitions/mcpproxy-go_internal_observability.ReadinessResponse"}}}}},"/servers":{"get":{"security":[{"ApiKeyAuth":[],"ApiKeyQuery":[]}],"description":"Returns all configured MCP servers with connection status, tool counts, and aggregate statistics","consumes":["application/json"],"produces":["application/json"],"tags":["servers"],"summary":"List all upstream servers","parameters":[{"type":"string","description":"API Key (alternative to header for browser/SSE)","name":"apikey","in":"query"}],"responses":{"200":{"description":"List of servers with statistics","schema":{"$ref":"#/definitions/main.ServersResponse"}},"401":{"description":"Unauthorized - missing or invalid API key","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/main.ErrorResponse"}}}}},"/servers/restart_all":{"post":{"security":[{"ApiKeyAuth":[],"ApiKeyQuery":[]}],"description":"Sequentially restarts all configured servers. Returns partial success if some servers fail.","consumes":["application/json"],"produces":["application/json"],"tags":["servers"],"summary":"Restart all upstream servers","parameters":[{"type":"string","description":"API Key","name":"apikey","in":"query"}],"responses":{"200":{"description":"Restart results with success/failure counts","schema":{"$ref":"#/definitions/main.RestartAllResponse"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"403":{"description":"Forbidden - read-only mode","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/main.ErrorResponse"}}}}},"/servers/{name}/logs":{"get":{"security":[{"ApiKeyAuth":[],"ApiKeyQuery":[]}],"description":"Returns recent log entries for a specific upstream server","consumes":["application/json"],"produces":["application/json"],"tags":["servers"],"summary":"Get server logs","parameters":[{"type":"string","description":"Server name","name":"name","in":"path","required":true},{"type":"integer","description":"Number of lines to return (default 50, max 1000)","name":"tail","in":"query"},{"type":"string","description":"API Key","name":"apikey","in":"query"}],"responses":{"200":{"description":"Log entries","schema":{"type":"array","items":{"$ref":"#/definitions/main.LogEntry"}}},"400":{"description":"Bad request - invalid tail parameter","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/main.ErrorResponse"}}}}},"/servers/{name}/restart":{"post":{"security":[{"ApiKeyAuth":[],"ApiKeyQuery":[]}],"description":"Stops and restarts the connection to a specific upstream MCP server. Emits servers.changed event.","consumes":["application/json"],"produces":["application/json"],"tags":["servers"],"summary":"Restart an upstream server","parameters":[{"type":"string","description":"Server name","name":"name","in":"path","required":true},{"type":"string","description":"API Key (alternative to header)","name":"apikey","in":"query"}],"responses":{"200":{"description":"Success message","schema":{"type":"object","additionalProperties":{"type":"string"}}},"400":{"description":"Bad request - invalid server name","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"403":{"description":"Forbidden - read-only mode or management disabled","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"404":{"description":"Server not found","schema":{"$ref":"#/definitions/main.ErrorResponse"}},"500":{"description":"Internal server error","schema":{"$ref":"#/definitions/main.ErrorResponse"}}}}}},"definitions":{"internal_httpapi.AddServerRequest":{"type":"object","properties":{"args":{"type":"array","items":{"type":"string"}},"command":{"type":"string"},"enabled":{"type":"boolean"},"env":{"type":"object","additionalProperties":{"type":"string"}},"headers":{"type":"object","additionalProperties":{"type":"string"}},"name":{"type":"string"},"protocol":{"type":"string"},"quarantined":{"type":"boolean"},"url":{"type":"string"},"working_dir":{"type":"string"}}},"main.Diagnostics":{"type":"object","properties":{"docker_status":{"$ref":"#/definitions/main.DockerStatus"},"missing_secrets":{"type":"array","items":{"$ref":"#/definitions/main.MissingSecret"}},"oauth_required":{"type":"array","items":{"$ref":"#/definitions/main.OAuthRequirement"}},"runtime_warnings":{"type":"array","items":{"type":"string"}},"timestamp":{"type":"string","example":"2025-11-23T10:35:12Z"},"total_issues":{"type":"integer","example":3},"upstream_errors":{"type":"array","items":{"$ref":"#/definitions/main.UpstreamError"}}}},"main.DockerStatus":{"type":"object","properties":{"available":{"type":"boolean","example":true},"error":{"type":"string","example":""},"version":{"type":"string","example":"24.0.7"}}},"main.ErrorResponse":{"type":"object","properties":{"code":{"type":"string","example":"MGMT_DISABLED"},"details":{"type":"string","example":"Set disable_management=false in config"},"error":{"type":"string","example":"management operations disabled"}}},"main.LogEntry":{"type":"object","properties":{"level":{"type":"string","example":"INFO"},"message":{"type":"string","example":"Tool call: create_issue"},"server":{"type":"string","example":"github-server"},"timestamp":{"type":"string","example":"2025-11-23T10:30:00Z"}}},"main.MissingSecret":{"type":"object","properties":{"secret_name":{"type":"string","example":"GITHUB_TOKEN"},"used_by":{"type":"array","items":{"type":"string"},"example":["[\"github-server\"","\"gh-issues\"]"]}}},"main.OAuthRequirement":{"type":"object","properties":{"expires_at":{"type":"string","example":"2025-11-22T18:00:00Z"},"message":{"type":"string","example":"Run: mcpproxy auth login --server=github-server"},"server_name":{"type":"string","example":"github-server"},"state":{"type":"string","example":"expired"}}},"main.RestartAllResponse":{"type":"object","properties":{"errors":{"type":"array","items":{"type":"string"},"example":["[\"server-1: connection timeout\"]"]},"failed_count":{"type":"integer","example":1},"success_count":{"type":"integer","example":9}}},"main.Server":{"type":"object","properties":{"connected":{"type":"boolean","example":true},"enabled":{"type":"boolean","example":true},"error":{"type":"string","example":""},"name":{"type":"string","example":"github-server"},"quarantined":{"type":"boolean","example":false},"tool_count":{"type":"integer","example":25}}},"main.ServerStats":{"type":"object","properties":{"connected":{"type":"integer","example":7},"disabled":{"type":"integer","example":2},"enabled":{"type":"integer","example":8},"errors":{"type":"integer","example":1},"quarantined":{"type":"integer","example":1},"total":{"type":"integer","example":10}}},"main.ServersResponse":{"type":"object","properties":{"servers":{"type":"array","items":{"$ref":"#/definitions/main.Server"}},"stats":{"$ref":"#/definitions/main.ServerStats"}}},"main.UpstreamError":{"type":"object","properties":{"error_message":{"type":"string","example":"connection refused"},"server_name":{"type":"string","example":"weather-api"},"timestamp":{"type":"string","example":"2025-11-23T09:15:30Z"}}},"mcpproxy-go_internal_config.Config":{"type":"object","properties":{"activity_cleanup_interval_min":{"description":"Background cleanup interval in minutes (default: 60)","type":"integer"},"activity_max_records":{"description":"Max records before pruning (default: 100000)","type":"integer"},"activity_max_response_size":{"description":"Response truncation limit in bytes (default: 65536)","type":"integer"},"activity_retention_days":{"description":"Activity logging settings (RFC-003)","type":"integer"},"allow_server_add":{"type":"boolean"},"allow_server_remove":{"type":"boolean"},"api_key":{"description":"Security settings","type":"string"},"call_tool_timeout":{"type":"string"},"check_server_repo":{"description":"Repository detection settings","type":"boolean"},"code_execution_max_tool_calls":{"description":"Max tool calls per execution (0 = unlimited, default: 0)","type":"integer"},"code_execution_pool_size":{"description":"JavaScript runtime pool size (default: 10)","type":"integer"},"code_execution_timeout_ms":{"description":"Timeout in milliseconds (default: 120000, max: 600000)","type":"integer"},"data_dir":{"type":"string"},"debug_search":{"type":"boolean"},"disable_management":{"type":"boolean"},"docker_isolation":{"description":"Docker isolation settings","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_config.DockerIsolationConfig"}]},"docker_recovery":{"description":"Docker recovery settings","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_config.DockerRecoveryConfig"}]},"enable_code_execution":{"description":"Code execution settings","type":"boolean"},"enable_prompts":{"description":"Prompts settings","type":"boolean"},"enable_socket":{"description":"Enable Unix socket/named pipe for local IPC (default: true)","type":"boolean"},"enable_tray":{"type":"boolean"},"environment":{"description":"Environment configuration for secure variable filtering","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_secureenv.EnvConfig"}]},"features":{"description":"Feature flags for modular functionality","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_config.FeatureFlags"}]},"intent_declaration":{"description":"Intent declaration settings (Spec 018)","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_config.IntentDeclarationConfig"}]},"listen":{"type":"string"},"logging":{"description":"Logging configuration","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_config.LogConfig"}]},"mcpServers":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_config.ServerConfig"}},"oauth_expiry_warning_hours":{"description":"Health status settings","type":"number"},"read_only_mode":{"type":"boolean"},"registries":{"description":"Registries configuration for MCP server discovery","type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_config.RegistryEntry"}},"tls":{"description":"TLS configuration","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_config.TLSConfig"}]},"tokenizer":{"description":"Tokenizer configuration for token counting","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_config.TokenizerConfig"}]},"tool_response_limit":{"type":"integer"},"tools_limit":{"type":"integer"},"top_k":{"type":"integer"},"tray_endpoint":{"description":"Tray endpoint override (unix:// or npipe://)","type":"string"}}},"mcpproxy-go_internal_config.DockerIsolationConfig":{"type":"object","properties":{"cpu_limit":{"description":"CPU limit for containers","type":"string"},"default_images":{"description":"Map of runtime type to Docker image","type":"object","additionalProperties":{"type":"string"}},"enabled":{"description":"Global enable/disable for Docker isolation","type":"boolean"},"extra_args":{"description":"Additional docker run arguments","type":"array","items":{"type":"string"}},"log_driver":{"description":"Docker log driver (default: json-file)","type":"string"},"log_max_files":{"description":"Maximum number of log files (default: 3)","type":"string"},"log_max_size":{"description":"Maximum size of log files (default: 100m)","type":"string"},"memory_limit":{"description":"Memory limit for containers","type":"string"},"network_mode":{"description":"Docker network mode (default: bridge)","type":"string"},"registry":{"description":"Custom registry (defaults to docker.io)","type":"string"},"timeout":{"description":"Container startup timeout","type":"string"}}},"mcpproxy-go_internal_config.DockerRecoveryConfig":{"type":"object","properties":{"enabled":{"description":"Enable Docker recovery monitoring (default: true)","type":"boolean"},"max_retries":{"description":"Maximum retry attempts (0 = unlimited)","type":"integer"},"notify_on_failure":{"description":"Show notification on recovery failure (default: true)","type":"boolean"},"notify_on_retry":{"description":"Show notification on each retry (default: false)","type":"boolean"},"notify_on_start":{"description":"Show notification when recovery starts (default: true)","type":"boolean"},"notify_on_success":{"description":"Show notification on successful recovery (default: true)","type":"boolean"},"persistent_state":{"description":"Save recovery state across restarts (default: true)","type":"boolean"}}},"mcpproxy-go_internal_config.FeatureFlags":{"type":"object","properties":{"enable_async_storage":{"type":"boolean"},"enable_caching":{"type":"boolean"},"enable_contract_tests":{"type":"boolean"},"enable_debug_logging":{"description":"Development features","type":"boolean"},"enable_docker_isolation":{"type":"boolean"},"enable_event_bus":{"type":"boolean"},"enable_health_checks":{"type":"boolean"},"enable_metrics":{"type":"boolean"},"enable_oauth":{"description":"Security features","type":"boolean"},"enable_observability":{"description":"Observability features","type":"boolean"},"enable_quarantine":{"type":"boolean"},"enable_runtime":{"description":"Runtime features","type":"boolean"},"enable_search":{"description":"Storage features","type":"boolean"},"enable_sse":{"type":"boolean"},"enable_tracing":{"type":"boolean"},"enable_tray":{"type":"boolean"},"enable_web_ui":{"description":"UI features","type":"boolean"}}},"mcpproxy-go_internal_config.IntentDeclarationConfig":{"type":"object","properties":{"strict_server_validation":{"description":"StrictServerValidation controls whether server annotation mismatches\ncause rejection (true) or just warnings (false).\nDefault: true (reject mismatches)","type":"boolean"}}},"mcpproxy-go_internal_config.IsolationConfig":{"type":"object","properties":{"enabled":{"description":"Enable Docker isolation for this server","type":"boolean"},"extra_args":{"description":"Additional docker run arguments for this server","type":"array","items":{"type":"string"}},"image":{"description":"Custom Docker image (overrides default)","type":"string"},"log_driver":{"description":"Docker log driver override for this server","type":"string"},"log_max_files":{"description":"Maximum number of log files override","type":"string"},"log_max_size":{"description":"Maximum size of log files override","type":"string"},"network_mode":{"description":"Custom network mode for this server","type":"string"},"working_dir":{"description":"Custom working directory in container","type":"string"}}},"mcpproxy-go_internal_config.LogConfig":{"type":"object","properties":{"compress":{"type":"boolean"},"enable_console":{"type":"boolean"},"enable_file":{"type":"boolean"},"filename":{"type":"string"},"json_format":{"type":"boolean"},"level":{"type":"string"},"log_dir":{"description":"Custom log directory","type":"string"},"max_age":{"description":"days","type":"integer"},"max_backups":{"description":"number of backup files","type":"integer"},"max_size":{"description":"MB","type":"integer"}}},"mcpproxy-go_internal_config.OAuthConfig":{"type":"object","properties":{"client_id":{"type":"string"},"client_secret":{"type":"string"},"extra_params":{"description":"Additional OAuth parameters (e.g., RFC 8707 resource)","type":"object","additionalProperties":{"type":"string"}},"pkce_enabled":{"type":"boolean"},"redirect_uri":{"type":"string"},"scopes":{"type":"array","items":{"type":"string"}}}},"mcpproxy-go_internal_config.RegistryEntry":{"type":"object","properties":{"count":{"description":"number or string","type":"string"},"description":{"type":"string"},"id":{"type":"string"},"name":{"type":"string"},"protocol":{"type":"string"},"servers_url":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}},"url":{"type":"string"}}},"mcpproxy-go_internal_config.ServerConfig":{"type":"object","properties":{"args":{"type":"array","items":{"type":"string"}},"command":{"type":"string"},"created":{"type":"string"},"enabled":{"type":"boolean"},"env":{"type":"object","additionalProperties":{"type":"string"}},"headers":{"description":"For HTTP servers","type":"object","additionalProperties":{"type":"string"}},"isolation":{"description":"Per-server isolation settings","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_config.IsolationConfig"}]},"name":{"type":"string"},"oauth":{"description":"OAuth configuration (keep even when empty to signal OAuth requirement)","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_config.OAuthConfig"}]},"protocol":{"description":"stdio, http, sse, streamable-http, auto","type":"string"},"quarantined":{"description":"Security quarantine status","type":"boolean"},"updated":{"type":"string"},"url":{"type":"string"},"working_dir":{"description":"Working directory for stdio servers","type":"string"}}},"mcpproxy-go_internal_config.TLSConfig":{"type":"object","properties":{"certs_dir":{"description":"Directory for certificates","type":"string"},"enabled":{"description":"Enable HTTPS","type":"boolean"},"hsts":{"description":"Enable HTTP Strict Transport Security","type":"boolean"},"require_client_cert":{"description":"Enable mTLS","type":"boolean"}}},"mcpproxy-go_internal_config.TokenizerConfig":{"type":"object","properties":{"default_model":{"description":"Default model for tokenization (e.g., \"gpt-4\")","type":"string"},"enabled":{"description":"Enable token counting","type":"boolean"},"encoding":{"description":"Default encoding (e.g., \"cl100k_base\")","type":"string"}}},"mcpproxy-go_internal_contracts.APIResponse":{"type":"object","properties":{"data":{"type":"object"},"error":{"type":"string"},"request_id":{"type":"string"},"success":{"type":"boolean"}}},"mcpproxy-go_internal_contracts.ActivityDetailResponse":{"type":"object","properties":{"activity":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ActivityRecord"}}},"mcpproxy-go_internal_contracts.ActivityListResponse":{"type":"object","properties":{"activities":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ActivityRecord"}},"limit":{"type":"integer"},"offset":{"type":"integer"},"total":{"type":"integer"}}},"mcpproxy-go_internal_contracts.ActivityRecord":{"type":"object","properties":{"arguments":{"description":"Tool call arguments","type":"object"},"duration_ms":{"description":"Execution duration in milliseconds","type":"integer"},"error_message":{"description":"Error details if status is \"error\"","type":"string"},"id":{"description":"Unique identifier (ULID format)","type":"string"},"metadata":{"description":"Additional context-specific data","type":"object"},"request_id":{"description":"HTTP request ID for correlation","type":"string"},"response":{"description":"Tool response (potentially truncated)","type":"string"},"response_truncated":{"description":"True if response was truncated","type":"boolean"},"server_name":{"description":"Name of upstream MCP server","type":"string"},"session_id":{"description":"MCP session ID for correlation","type":"string"},"source":{"description":"How activity was triggered: \"mcp\", \"cli\", \"api\"","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ActivitySource"}]},"status":{"description":"Result status: \"success\", \"error\", \"blocked\"","type":"string"},"timestamp":{"description":"When activity occurred","type":"string"},"tool_name":{"description":"Name of tool called","type":"string"},"type":{"description":"Type of activity","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ActivityType"}]}}},"mcpproxy-go_internal_contracts.ActivitySource":{"type":"string","enum":["mcp","cli","api"],"x-enum-varnames":["ActivitySourceMCP","ActivitySourceCLI","ActivitySourceAPI"]},"mcpproxy-go_internal_contracts.ActivitySummaryResponse":{"type":"object","properties":{"blocked_count":{"description":"Count of blocked activities","type":"integer"},"end_time":{"description":"End of the period (RFC3339)","type":"string"},"error_count":{"description":"Count of error activities","type":"integer"},"period":{"description":"Time period (1h, 24h, 7d, 30d)","type":"string"},"start_time":{"description":"Start of the period (RFC3339)","type":"string"},"success_count":{"description":"Count of successful activities","type":"integer"},"top_servers":{"description":"Top servers by activity count","type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ActivityTopServer"}},"top_tools":{"description":"Top tools by activity count","type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ActivityTopTool"}},"total_count":{"description":"Total activity count","type":"integer"}}},"mcpproxy-go_internal_contracts.ActivityTopServer":{"type":"object","properties":{"count":{"description":"Activity count","type":"integer"},"name":{"description":"Server name","type":"string"}}},"mcpproxy-go_internal_contracts.ActivityTopTool":{"type":"object","properties":{"count":{"description":"Activity count","type":"integer"},"server":{"description":"Server name","type":"string"},"tool":{"description":"Tool name","type":"string"}}},"mcpproxy-go_internal_contracts.ActivityType":{"type":"string","enum":["tool_call","policy_decision","quarantine_change","server_change"],"x-enum-varnames":["ActivityTypeToolCall","ActivityTypePolicyDecision","ActivityTypeQuarantineChange","ActivityTypeServerChange"]},"mcpproxy-go_internal_contracts.ConfigApplyResult":{"type":"object","properties":{"applied_immediately":{"type":"boolean"},"changed_fields":{"type":"array","items":{"type":"string"}},"requires_restart":{"type":"boolean"},"restart_reason":{"type":"string"},"success":{"type":"boolean"},"validation_errors":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ValidationError"}}}},"mcpproxy-go_internal_contracts.DCRStatus":{"type":"object","properties":{"attempted":{"type":"boolean"},"error":{"type":"string"},"status_code":{"type":"integer"},"success":{"type":"boolean"}}},"mcpproxy-go_internal_contracts.Diagnostics":{"type":"object","properties":{"docker_status":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.DockerStatus"},"missing_secrets":{"description":"Renamed to avoid conflict","type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.MissingSecretInfo"}},"oauth_issues":{"description":"OAuth parameter mismatches","type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.OAuthIssue"}},"oauth_required":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.OAuthRequirement"}},"runtime_warnings":{"type":"array","items":{"type":"string"}},"timestamp":{"type":"string"},"total_issues":{"type":"integer"},"upstream_errors":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.UpstreamError"}}}},"mcpproxy-go_internal_contracts.DockerStatus":{"type":"object","properties":{"available":{"type":"boolean"},"error":{"type":"string"},"version":{"type":"string"}}},"mcpproxy-go_internal_contracts.ErrorResponse":{"type":"object","properties":{"error":{"type":"string"},"request_id":{"type":"string"},"success":{"type":"boolean"}}},"mcpproxy-go_internal_contracts.GetConfigResponse":{"type":"object","properties":{"config":{"description":"The configuration object","type":"object"},"config_path":{"description":"Path to config file","type":"string"}}},"mcpproxy-go_internal_contracts.GetRegistriesResponse":{"type":"object","properties":{"registries":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.Registry"}},"total":{"type":"integer"}}},"mcpproxy-go_internal_contracts.GetServerLogsResponse":{"type":"object","properties":{"count":{"type":"integer"},"logs":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.LogEntry"}},"server_name":{"type":"string"}}},"mcpproxy-go_internal_contracts.GetServerToolCallsResponse":{"type":"object","properties":{"server_name":{"type":"string"},"tool_calls":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ToolCallRecord"}},"total":{"type":"integer"}}},"mcpproxy-go_internal_contracts.GetServerToolsResponse":{"type":"object","properties":{"count":{"type":"integer"},"server_name":{"type":"string"},"tools":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.Tool"}}}},"mcpproxy-go_internal_contracts.GetServersResponse":{"type":"object","properties":{"servers":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.Server"}},"stats":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerStats"}}},"mcpproxy-go_internal_contracts.GetSessionDetailResponse":{"type":"object","properties":{"session":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.MCPSession"}}},"mcpproxy-go_internal_contracts.GetSessionsResponse":{"type":"object","properties":{"limit":{"type":"integer"},"offset":{"type":"integer"},"sessions":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.MCPSession"}},"total":{"type":"integer"}}},"mcpproxy-go_internal_contracts.GetToolCallDetailResponse":{"type":"object","properties":{"tool_call":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ToolCallRecord"}}},"mcpproxy-go_internal_contracts.GetToolCallsResponse":{"type":"object","properties":{"limit":{"type":"integer"},"offset":{"type":"integer"},"tool_calls":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ToolCallRecord"}},"total":{"type":"integer"}}},"mcpproxy-go_internal_contracts.HealthStatus":{"type":"object","properties":{"action":{"description":"Action is the suggested fix action: \"login\", \"restart\", \"enable\", \"approve\", \"view_logs\", \"set_secret\", \"configure\", or \"\" (none)","type":"string"},"admin_state":{"description":"AdminState indicates the admin state: \"enabled\", \"disabled\", or \"quarantined\"","type":"string"},"detail":{"description":"Detail is an optional longer explanation of the status","type":"string"},"level":{"description":"Level indicates the health level: \"healthy\", \"degraded\", or \"unhealthy\"","type":"string"},"summary":{"description":"Summary is a human-readable status message (e.g., \"Connected (5 tools)\")","type":"string"}}},"mcpproxy-go_internal_contracts.InfoEndpoints":{"type":"object","properties":{"http":{"description":"HTTP endpoint address (e.g., \"127.0.0.1:8080\")","type":"string"},"socket":{"description":"Unix socket path (empty if disabled)","type":"string"}}},"mcpproxy-go_internal_contracts.InfoResponse":{"type":"object","properties":{"endpoints":{"description":"Available API endpoints","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.InfoEndpoints"}]},"listen_addr":{"description":"Listen address (e.g., \"127.0.0.1:8080\")","type":"string"},"update":{"description":"Update information (if available)","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.UpdateInfo"}]},"version":{"description":"Current MCPProxy version","type":"string"},"web_ui_url":{"description":"URL to access the web control panel","type":"string"}}},"mcpproxy-go_internal_contracts.IsolationConfig":{"type":"object","properties":{"cpu_limit":{"type":"string"},"enabled":{"type":"boolean"},"image":{"type":"string"},"memory_limit":{"type":"string"},"timeout":{"type":"string"},"working_dir":{"type":"string"}}},"mcpproxy-go_internal_contracts.LogEntry":{"type":"object","properties":{"fields":{"type":"object"},"level":{"type":"string"},"message":{"type":"string"},"server":{"type":"string"},"timestamp":{"type":"string"}}},"mcpproxy-go_internal_contracts.MCPSession":{"type":"object","properties":{"client_name":{"type":"string"},"client_version":{"type":"string"},"end_time":{"type":"string"},"experimental":{"type":"array","items":{"type":"string"}},"has_roots":{"description":"MCP Client Capabilities","type":"boolean"},"has_sampling":{"type":"boolean"},"id":{"type":"string"},"last_activity":{"type":"string"},"start_time":{"type":"string"},"status":{"type":"string"},"tool_call_count":{"type":"integer"},"total_tokens":{"type":"integer"}}},"mcpproxy-go_internal_contracts.MetadataStatus":{"type":"object","properties":{"authorization_servers":{"type":"array","items":{"type":"string"}},"error":{"type":"string"},"found":{"type":"boolean"},"url_checked":{"type":"string"}}},"mcpproxy-go_internal_contracts.MissingSecretInfo":{"type":"object","properties":{"secret_name":{"type":"string"},"used_by":{"type":"array","items":{"type":"string"}}}},"mcpproxy-go_internal_contracts.NPMPackageInfo":{"type":"object","properties":{"exists":{"type":"boolean"},"install_cmd":{"type":"string"}}},"mcpproxy-go_internal_contracts.OAuthConfig":{"type":"object","properties":{"auth_url":{"type":"string"},"client_id":{"type":"string"},"extra_params":{"type":"object","additionalProperties":{"type":"string"}},"pkce_enabled":{"type":"boolean"},"redirect_port":{"type":"integer"},"scopes":{"type":"array","items":{"type":"string"}},"token_expires_at":{"description":"When the OAuth token expires","type":"string"},"token_url":{"type":"string"},"token_valid":{"description":"Whether token is currently valid","type":"boolean"}}},"mcpproxy-go_internal_contracts.OAuthErrorDetails":{"type":"object","properties":{"authorization_server_metadata":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.MetadataStatus"},"dcr_status":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.DCRStatus"},"protected_resource_metadata":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.MetadataStatus"},"server_url":{"type":"string"}}},"mcpproxy-go_internal_contracts.OAuthFlowError":{"type":"object","properties":{"correlation_id":{"description":"Flow tracking ID for log correlation","type":"string"},"debug_hint":{"description":"CLI command for log lookup","type":"string"},"details":{"description":"Structured discovery/failure details","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.OAuthErrorDetails"}]},"error_code":{"description":"Machine-readable error code (e.g., OAUTH_NO_METADATA)","type":"string"},"error_type":{"description":"Category of OAuth runtime failure","type":"string"},"message":{"description":"Human-readable error description","type":"string"},"request_id":{"description":"HTTP request ID (from PR #237)","type":"string"},"server_name":{"description":"Server that failed OAuth","type":"string"},"success":{"description":"Always false","type":"boolean"},"suggestion":{"description":"Actionable remediation hint","type":"string"}}},"mcpproxy-go_internal_contracts.OAuthIssue":{"type":"object","properties":{"documentation_url":{"type":"string"},"error":{"type":"string"},"issue":{"type":"string"},"missing_params":{"type":"array","items":{"type":"string"}},"resolution":{"type":"string"},"server_name":{"type":"string"}}},"mcpproxy-go_internal_contracts.OAuthRequirement":{"type":"object","properties":{"expires_at":{"type":"string"},"message":{"type":"string"},"server_name":{"type":"string"},"state":{"type":"string"}}},"mcpproxy-go_internal_contracts.OAuthStartResponse":{"type":"object","properties":{"auth_url":{"description":"Authorization URL (always included for manual use)","type":"string"},"browser_error":{"description":"Error message if browser launch failed","type":"string"},"browser_opened":{"description":"Whether browser launch succeeded","type":"boolean"},"correlation_id":{"description":"UUID for tracking this flow","type":"string"},"message":{"description":"Human-readable status message","type":"string"},"server_name":{"description":"Name of the server being authenticated","type":"string"},"success":{"description":"Always true for successful start","type":"boolean"}}},"mcpproxy-go_internal_contracts.Registry":{"type":"object","properties":{"count":{"description":"number or string","type":"string"},"description":{"type":"string"},"id":{"type":"string"},"name":{"type":"string"},"protocol":{"type":"string"},"servers_url":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}},"url":{"type":"string"}}},"mcpproxy-go_internal_contracts.ReplayToolCallRequest":{"type":"object","properties":{"arguments":{"description":"Modified arguments for replay","type":"object"}}},"mcpproxy-go_internal_contracts.ReplayToolCallResponse":{"type":"object","properties":{"error":{"description":"Error if replay failed","type":"string"},"new_call_id":{"description":"ID of the newly created call","type":"string"},"new_tool_call":{"description":"The new tool call record","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ToolCallRecord"}]},"replayed_from":{"description":"Original call ID","type":"string"},"success":{"type":"boolean"}}},"mcpproxy-go_internal_contracts.RepositoryInfo":{"type":"object","properties":{"npm":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.NPMPackageInfo"}}},"mcpproxy-go_internal_contracts.RepositoryServer":{"type":"object","properties":{"connect_url":{"description":"Alternative connection URL","type":"string"},"created_at":{"type":"string"},"description":{"type":"string"},"id":{"type":"string"},"install_cmd":{"description":"Installation command","type":"string"},"name":{"type":"string"},"registry":{"description":"Which registry this came from","type":"string"},"repository_info":{"description":"Detected package info","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.RepositoryInfo"}]},"source_code_url":{"description":"Source repository URL","type":"string"},"updated_at":{"type":"string"},"url":{"description":"MCP endpoint for remote servers only","type":"string"}}},"mcpproxy-go_internal_contracts.SearchRegistryServersResponse":{"type":"object","properties":{"query":{"type":"string"},"registry_id":{"type":"string"},"servers":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.RepositoryServer"}},"tag":{"type":"string"},"total":{"type":"integer"}}},"mcpproxy-go_internal_contracts.SearchResult":{"type":"object","properties":{"matches":{"type":"integer"},"score":{"type":"number"},"snippet":{"type":"string"},"tool":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.Tool"}}},"mcpproxy-go_internal_contracts.SearchToolsResponse":{"type":"object","properties":{"query":{"type":"string"},"results":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.SearchResult"}},"took":{"type":"string"},"total":{"type":"integer"}}},"mcpproxy-go_internal_contracts.Server":{"type":"object","properties":{"args":{"type":"array","items":{"type":"string"}},"authenticated":{"description":"OAuth authentication status","type":"boolean"},"command":{"type":"string"},"connected":{"type":"boolean"},"connected_at":{"type":"string"},"connecting":{"type":"boolean"},"created":{"type":"string"},"enabled":{"type":"boolean"},"env":{"type":"object","additionalProperties":{"type":"string"}},"headers":{"type":"object","additionalProperties":{"type":"string"}},"health":{"description":"Unified health status calculated by the backend","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.HealthStatus"}]},"id":{"type":"string"},"isolation":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.IsolationConfig"},"last_error":{"type":"string"},"last_reconnect_at":{"type":"string"},"last_retry_time":{"type":"string"},"name":{"type":"string"},"oauth":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.OAuthConfig"},"oauth_status":{"description":"OAuth status: \"authenticated\", \"expired\", \"error\", \"none\"","type":"string"},"protocol":{"type":"string"},"quarantined":{"type":"boolean"},"reconnect_count":{"type":"integer"},"retry_count":{"type":"integer"},"should_retry":{"type":"boolean"},"status":{"type":"string"},"token_expires_at":{"description":"When the OAuth token expires (ISO 8601)","type":"string"},"tool_count":{"type":"integer"},"tool_list_token_size":{"description":"Token size for this server's tools","type":"integer"},"updated":{"type":"string"},"url":{"type":"string"},"user_logged_out":{"description":"True if user explicitly logged out (prevents auto-reconnection)","type":"boolean"},"working_dir":{"type":"string"}}},"mcpproxy-go_internal_contracts.ServerActionResponse":{"type":"object","properties":{"action":{"type":"string"},"async":{"type":"boolean"},"server":{"type":"string"},"success":{"type":"boolean"}}},"mcpproxy-go_internal_contracts.ServerStats":{"type":"object","properties":{"connected_servers":{"type":"integer"},"docker_containers":{"type":"integer"},"quarantined_servers":{"type":"integer"},"token_metrics":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ServerTokenMetrics"},"total_servers":{"type":"integer"},"total_tools":{"type":"integer"}}},"mcpproxy-go_internal_contracts.ServerTokenMetrics":{"type":"object","properties":{"average_query_result_size":{"description":"Typical retrieve_tools output (tokens)","type":"integer"},"per_server_tool_list_sizes":{"description":"Token size per server","type":"object","additionalProperties":{"type":"integer"}},"saved_tokens":{"description":"Difference","type":"integer"},"saved_tokens_percentage":{"description":"Percentage saved","type":"number"},"total_server_tool_list_size":{"description":"All upstream tools combined (tokens)","type":"integer"}}},"mcpproxy-go_internal_contracts.SuccessResponse":{"type":"object","properties":{"data":{"type":"object"},"success":{"type":"boolean"}}},"mcpproxy-go_internal_contracts.TokenMetrics":{"type":"object","properties":{"encoding":{"description":"Encoding used (e.g., cl100k_base)","type":"string"},"estimated_cost":{"description":"Optional cost estimate","type":"number"},"input_tokens":{"description":"Tokens in the request","type":"integer"},"model":{"description":"Model used for tokenization","type":"string"},"output_tokens":{"description":"Tokens in the response","type":"integer"},"total_tokens":{"description":"Total tokens (input + output)","type":"integer"},"truncated_tokens":{"description":"Tokens removed by truncation","type":"integer"},"was_truncated":{"description":"Whether response was truncated","type":"boolean"}}},"mcpproxy-go_internal_contracts.Tool":{"type":"object","properties":{"annotations":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ToolAnnotation"},"description":{"type":"string"},"last_used":{"type":"string"},"name":{"type":"string"},"schema":{"type":"object"},"server_name":{"type":"string"},"usage":{"type":"integer"}}},"mcpproxy-go_internal_contracts.ToolAnnotation":{"type":"object","properties":{"destructiveHint":{"type":"boolean"},"idempotentHint":{"type":"boolean"},"openWorldHint":{"type":"boolean"},"readOnlyHint":{"type":"boolean"},"title":{"type":"string"}}},"mcpproxy-go_internal_contracts.ToolCallRecord":{"type":"object","properties":{"annotations":{"description":"Tool behavior hints snapshot","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ToolAnnotation"}]},"arguments":{"description":"Tool arguments","type":"object"},"config_path":{"description":"Active config file path","type":"string"},"duration":{"description":"Duration in nanoseconds","type":"integer"},"error":{"description":"Error message (failure only)","type":"string"},"execution_type":{"description":"\"direct\" or \"code_execution\"","type":"string"},"id":{"description":"Unique identifier","type":"string"},"mcp_client_name":{"description":"MCP client name from InitializeRequest","type":"string"},"mcp_client_version":{"description":"MCP client version","type":"string"},"mcp_session_id":{"description":"MCP session identifier","type":"string"},"metrics":{"description":"Token usage metrics (nil for older records)","allOf":[{"$ref":"#/definitions/mcpproxy-go_internal_contracts.TokenMetrics"}]},"parent_call_id":{"description":"Links nested calls to parent code_execution","type":"string"},"request_id":{"description":"Request correlation ID","type":"string"},"response":{"description":"Tool response (success only)","type":"object"},"server_id":{"description":"Server identity hash","type":"string"},"server_name":{"description":"Human-readable server name","type":"string"},"timestamp":{"description":"When the call was made","type":"string"},"tool_name":{"description":"Tool name (without server prefix)","type":"string"}}},"mcpproxy-go_internal_contracts.UpdateInfo":{"type":"object","properties":{"available":{"description":"Whether an update is available","type":"boolean"},"check_error":{"description":"Error message if update check failed","type":"string"},"checked_at":{"description":"When the update check was performed","type":"string"},"is_prerelease":{"description":"Whether the latest version is a prerelease","type":"boolean"},"latest_version":{"description":"Latest version available (e.g., \"v1.2.3\")","type":"string"},"release_url":{"description":"URL to the release page","type":"string"}}},"mcpproxy-go_internal_contracts.UpstreamError":{"type":"object","properties":{"error_message":{"type":"string"},"server_name":{"type":"string"},"timestamp":{"type":"string"}}},"mcpproxy-go_internal_contracts.ValidateConfigResponse":{"type":"object","properties":{"errors":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_contracts.ValidationError"}},"valid":{"type":"boolean"}}},"mcpproxy-go_internal_contracts.ValidationError":{"type":"object","properties":{"field":{"type":"string"},"message":{"type":"string"}}},"mcpproxy-go_internal_management.BulkOperationResult":{"type":"object","properties":{"errors":{"description":"Map of server name to error message","type":"object","additionalProperties":{"type":"string"}},"failed":{"description":"Number of failed operations","type":"integer"},"successful":{"description":"Number of successful operations","type":"integer"},"total":{"description":"Total servers processed","type":"integer"}}},"mcpproxy-go_internal_observability.HealthResponse":{"type":"object","properties":{"components":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_observability.HealthStatus"}},"status":{"description":"\"healthy\" or \"unhealthy\"","type":"string"},"timestamp":{"type":"string"}}},"mcpproxy-go_internal_observability.HealthStatus":{"type":"object","properties":{"error":{"type":"string"},"latency":{"type":"string"},"name":{"type":"string"},"status":{"description":"\"healthy\" or \"unhealthy\"","type":"string"}}},"mcpproxy-go_internal_observability.ReadinessResponse":{"type":"object","properties":{"components":{"type":"array","items":{"$ref":"#/definitions/mcpproxy-go_internal_observability.HealthStatus"}},"status":{"description":"\"ready\" or \"not_ready\"","type":"string"},"timestamp":{"type":"string"}}},"mcpproxy-go_internal_secureenv.EnvConfig":{"type":"object","properties":{"allowed_system_vars":{"type":"array","items":{"type":"string"}},"custom_vars":{"type":"object","additionalProperties":{"type":"string"}},"enhance_path":{"description":"Enable PATH enhancement for Launchd scenarios","type":"boolean"},"inherit_system_safe":{"type":"boolean"}}}},"securityDefinitions":{"ApiKeyAuth":{"description":"API key authentication. Provide your API key in the X-API-Key header.","type":"apiKey","name":"X-API-Key","in":"header"},"ApiKeyQuery":{"description":"API key authentication via query parameter. Use ?apikey=your-key","type":"apiKey","name":"apikey","in":"query"}}}